<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QC-Check 02 | ÁîªÂÉèÊ§úÊüª„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥</title>
    <meta name="description" content="ÁâπÊÆä„Ç±„Éº„Éñ„É´Ë£ΩÈÄ† AIÁîªÂÉèÊ§úÊüª „Ç≠„É£„Éó„ÉÅ„É£„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- ‚îÄ‚îÄ „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ ‚îÄ‚îÄ -->
    <nav class="main-nav">
        <div class="nav-inner">
            <div class="nav-brand">
                <div class="logo-mark-sm">QC</div>
                <span class="nav-title">QC-Check 02</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link {% if active_page == 'capture' %}active{% endif %}">
                    <span class="nav-icon">üì∑</span>
                    <span>„Ç≠„É£„Éó„ÉÅ„É£</span>
                </a>
                <a href="/gallery-page" class="nav-link {% if active_page == 'gallery' %}active{% endif %}">
                    <span class="nav-icon">üñºÔ∏è</span>
                    <span>„ÇÆ„É£„É©„É™„Éº</span>
                </a>
                <a href="/reports" class="nav-link {% if active_page == 'reports' %}active{% endif %}">
                    <span class="nav-icon">üìä</span>
                    <span>„É¨„Éù„Éº„Éà</span>
                </a>
            </div>
            <div class="nav-actions">
                <a href="/export" class="nav-btn" title="CSV„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ">
                    <span>üì•</span> „Ç®„ÇØ„Çπ„Éù„Éº„Éà
                </a>
            </div>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <!-- „Éà„Éº„Çπ„ÉàÈÄöÁü• -->
    <div id="toast-container"></div>

    <!-- ‚îÄ‚îÄ ÂÖ±ÈÄöÁîªÂÉè„Éì„É•„Éº„Ç¢„É¢„Éº„ÉÄ„É´ ‚îÄ‚îÄ -->
    <div class="viewer-overlay" id="viewer-overlay" onclick="closeViewer()">
        <div class="viewer-container" onclick="event.stopPropagation()">
            <button class="viewer-close" onclick="closeViewer()" title="Èñâ„Åò„Çã (Esc)">‚úï</button>
            <button class="viewer-nav viewer-prev" onclick="viewerNavigate(-1)" title="Ââç„ÅÆÁîªÂÉè (‚Üê)">‚Äπ</button>
            <div class="viewer-image-wrap">
                <img id="viewer-image" src="" alt="„Éó„É¨„Éì„É•„Éº">
            </div>
            <button class="viewer-nav viewer-next" onclick="viewerNavigate(1)" title="Ê¨°„ÅÆÁîªÂÉè (‚Üí)">‚Ä∫</button>
            <div class="viewer-footer">
                <div class="viewer-info">
                    <span class="viewer-label" id="viewer-label"></span>
                    <span class="viewer-filename" id="viewer-filename"></span>
                    <span class="viewer-counter" id="viewer-counter"></span>
                </div>

                <!-- AIÈÄ£Êê∫ -->
                <div class="viewer-ai-section" style="margin: 0 1rem;">
                    <button id="btn-analyze" class="btn btn-analyze"
                        style="background:#5c6bc0; color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">ü§ñ
                        AIÂà§ÂÆö</button>
                    <div id="ai-result-container" class="ai-result"
                        style="display:none; margin-left:1rem; align-items:center; gap:0.5rem;">
                        <span id="ai-label-value" class="ai-label-pill"
                            style="padding:0.25rem 0.5rem; border-radius:4px; font-weight:bold;"></span>
                        <span id="ai-score-value" class="ai-score-text"
                            style="font-family:monospace; font-weight:bold;"></span>
                    </div>
                </div>

                <div class="viewer-actions">
                    <button class="btn btn-viewer-ok" onclick="viewerLabel('ok')">
                        <span>‚úì</span> OK
                    </button>
                    <button class="btn btn-viewer-ng" onclick="viewerLabel('ng')">
                        <span>‚úó</span> NG
                    </button>
                    <button class="btn btn-viewer-delete" onclick="viewerDelete()">
                        <span>üóë</span> ÂâäÈô§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/viewer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>

</html>