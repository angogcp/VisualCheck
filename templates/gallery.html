{% extends "base.html" %}

{% block content %}
<div class="page-container">

    <!-- â”€â”€ ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ â”€â”€ -->
    <div class="page-header">
        <div class="page-header-left">
            <h1>ğŸ–¼ï¸ ã‚®ãƒ£ãƒ©ãƒªãƒ¼</h1>
            <span class="page-header-sub">æ’®å½±ç”»åƒã®ç®¡ç†ãƒ»ãƒ©ãƒ™ãƒ«ä»˜ã‘</span>
        </div>
        <div class="page-header-right">
            <div class="gallery-stats-mini">
                <span class="mini-stat stat-ok-text"><strong id="g-stat-ok">{{ stats.ok }}</strong> OK</span>
                <span class="mini-stat stat-ng-text"><strong id="g-stat-ng">{{ stats.ng }}</strong> NG</span>
                <span class="mini-stat stat-unlabeled-text"><strong id="g-stat-unlabeled">{{ stats.unlabeled }}</strong>
                    æœªåˆ†é¡</span>
                <span class="mini-stat stat-total-text"><strong id="g-stat-total">{{ stats.total }}</strong> åˆè¨ˆ</span>
            </div>
        </div>
    </div>

    <!-- â”€â”€ ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢ãƒãƒ¼ â”€â”€ -->
    <div class="filter-bar card glass-card">
        <div class="filter-tabs" id="filter-tabs">
            <button class="filter-tab active" data-label="" onclick="setFilter('')">ã™ã¹ã¦</button>
            <button class="filter-tab" data-label="ok" onclick="setFilter('ok')">
                <span class="filter-dot dot-ok"></span> OK
            </button>
            <button class="filter-tab" data-label="ng" onclick="setFilter('ng')">
                <span class="filter-dot dot-ng"></span> NG
            </button>
            <button class="filter-tab" data-label="unlabeled" onclick="setFilter('unlabeled')">
                <span class="filter-dot dot-unlabeled"></span> æœªåˆ†é¡
            </button>
        </div>
        <div class="filter-search">
            <input type="text" id="search-cable-id" placeholder="ã‚±ãƒ¼ãƒ–ãƒ«IDæ¤œç´¢..." autocomplete="off"
                oninput="debounceSearch()">
        </div>
    </div>

    <!-- â”€â”€ ç”»åƒã‚°ãƒªãƒƒãƒ‰ â”€â”€ -->
    <div class="gallery-full-grid" id="gallery-full-grid">
        <div class="gallery-loading" id="gallery-loading">
            <div class="spinner"></div>
            <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
    </div>

    <!-- â”€â”€ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ â”€â”€ -->
    <div class="pagination" id="pagination" style="display:none;">
        <button class="btn btn-page" id="btn-load-more" onclick="loadMore()">
            ã‚‚ã£ã¨è¡¨ç¤º
        </button>
        <span class="pagination-info" id="pagination-info"></span>
    </div>

    <!-- â”€â”€ ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¢ãƒ¼ãƒ€ãƒ« â”€â”€ -->
    <div class="viewer-overlay" id="viewer-overlay" onclick="closeViewer()">
        <div class="viewer-container" onclick="event.stopPropagation()">
            <button class="viewer-close" onclick="closeViewer()" title="é–‰ã˜ã‚‹ (Esc)">âœ•</button>
            <button class="viewer-nav viewer-prev" onclick="viewerNavigate(-1)" title="å‰ã®ç”»åƒ (â†)">â€¹</button>
            <div class="viewer-image-wrap">
                <img id="viewer-image" src="" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
            </div>
            <button class="viewer-nav viewer-next" onclick="viewerNavigate(1)" title="æ¬¡ã®ç”»åƒ (â†’)">â€º</button>
            <div class="viewer-footer">
                <div class="viewer-info">
                    <span class="viewer-label" id="viewer-label"></span>
                    <span class="viewer-filename" id="viewer-filename"></span>
                    <span class="viewer-counter" id="viewer-counter"></span>
                </div>
                <div class="viewer-actions">
                    <button class="btn btn-viewer-ok" onclick="viewerLabel('ok')">
                        <span>âœ“</span> OK
                    </button>
                    <button class="btn btn-viewer-ng" onclick="viewerLabel('ng')">
                        <span>âœ—</span> NG
                    </button>
                    <button class="btn btn-viewer-delete" onclick="viewerDelete()">
                        <span>ğŸ—‘</span> å‰Šé™¤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- â”€â”€ å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° â”€â”€ -->
    <div class="confirm-overlay" id="confirm-overlay">
        <div class="confirm-dialog card glass-card">
            <h3>âš ï¸ ç”»åƒã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</h3>
            <p id="confirm-filename"></p>
            <p class="confirm-warn">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</p>
            <div class="confirm-actions">
                <button class="btn btn-cancel" onclick="cancelDelete()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn btn-confirm-delete" onclick="confirmDelete()">å‰Šé™¤ã™ã‚‹</button>
            </div>
        </div>
    </div>

</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/gallery.js') }}"></script>
{% endblock %}